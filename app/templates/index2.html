<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- LEAFLET -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
      crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
    integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>
<!-- Create an element where the map will take place -->
<div id="mapid" style = "width:900px; height:580px;"></div>
<!--<script src="../static/leaf.js"></script>-->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <!-- END LEAFLET -->
    <title>We are in AFRICA !!!!!</title>
  </head>
  <body>
    <!-- LEAFLET -->
    <div id="mapid" style = "width:900px; height:580px;"></div>
    <!-- END LEAFLET -->
  </body>
</html>

<script>
var map = L
  .map('mapid')
  .setView([6, 6], 25);   // center position + zoom

L.tileLayer(
    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>',
    maxZoom: 12,
    }).addTo(map);


mapMarkers1 = [];
var source = new EventSource("/topic/antennos");
source.addEventListener("message", function(e) { console.log("message");
                                                  obj = JSON.parse(e.data);
                                                  console.log(obj);
                                                  for (var i = 0; i < mapMarkers1.length; i++) {
                                                    map.removeLayer(mapMarkers1[i]);
                                                    } 
                                                  marker1 = L.marker([obj.x, obj.y]).addTo(map);
                                                  mapMarkers1.push(marker1);
  }, false);
</script>